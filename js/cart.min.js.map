{"version":3,"sources":["cart.js"],"names":["makeTableResponsive","$","children","each","index2","tableText","this","text","prepend","jQuery","document","ready","remove","rowToDeleteCheckbox","calculateTotal","totalPrice","priceCells","find","amountCells","i","length","value","singlePrice","replace","cartAmount","parseInt","parseFloat","getElementById","totalPriceCell","innerHTML","totalPriceTable","append","forEach","changeRoleAttr","dataName","editableFields","removeAttr","hideColumn","attr","appendSum","rowToDelete","shureToDeleteModal","trapFocusinModal","parentsUntil","last","removeModal","promise","done","deleteButton","focus","on","e","modalOuter","itemCount"],"mappings":"AA4JA,SAASA,sBAUPC,EAAE,oBAAoBC,WAAWC,MAAK,SAASC,GAC7C,IAAIC,EAAYJ,EAAEK,MAAMC,OACxBN,EAAE,yBAA2BG,EAAS,GAAK,KAAKI,QAAQ,wBAA0BH,EAAY,WAxKlGI,OAAOC,UAAUC,OAAM,WAIrBF,OAAO,wCAAwCG,SAsB/C,IAAAC,EAAkBJ,OAAS,4CAsG7B,SAASK,IA4BT,IAAAC,EAASf,EACP,MAAAgB,EAAAP,OAAA,sCAAAQ,KAAA,SACAC,EAAAT,OAAA,uCAAAQ,KAAA,SACA,IAAA,IAAAE,EAAA,EAAAA,EAAAH,EAAAI,OAAAD,IACA,GAAAH,EAAAG,GAAAE,MAAA,CACA,IAAAC,EAAAN,EAAAG,GAAAE,MAAAE,QAAA,WAAA,IACAC,EAAAC,SAAAP,EAAAC,GAAAE,OAEAN,GADAW,WAAAJ,GAAAE,EAKEvB,gBAAES,SAAAiB,eAAoC,qBACvCC,eAHDlB,SAAAiB,eAAA,2BAIDC,eAAAC,UAAAd,EA1BDa,eAAeP,MAAQN,EACvBe,gBAAgBD,UAAYd,EAC5Be,gBAAgBT,MAAQN,EAlIvBN,OAAA,SAAAsB,OAAA,4dAeA,CAAA,cAAA,aAAA,uBAAA,oBAAA,cAPQC,SAST,SAASC,GACTxB,OAAA,yBAAAyB,EAAA,MAAAjB,KAAA,SACMkB,KAAAA,WAAkB,YANtBtB,EAAoBI,KAAK,SAASmB,WAAW,mBAW9C,CAAA,cAAA,oBAEDJ,SALA,SAAoBG,GACK1B,OAAO,yBAA0B0B,EAAiB,MAAMlB,KAAK,SAK7EoB,KAAWA,OAApB,aACsB5B,OAAO,qCAAqCQ,KAAK,SAGpEqB,KAAA,OAAA,UACDC,OAAS,kCAAAtB,KAAA,SAAAL,SAQXZ,sBA6BEwC,EAAYT,GAAOU,QAAAA,SAAnB,WACA5B,gBAAAA,EAAAA,MACE6B,mBACA,ofAUFF,MAAAA,EAAevC,EAAAK,MAASqC,aAAA,SAAkBC,OACxCC,QAAAA,IAAAA,GACAL,EAAAA,OAAYvB,oBAAcmB,SAE3BvB,EAEDiC,UAAAC,MAAA,WAjBEL,mBAmBCM,aAAAvC,OAAA,kBACCuC,aAAAC,WATJT,EAAYU,GAAG,QAAS,kBAAkB,SAASC,GAahDC,WAFC3C,OAAA,wBAGH2C,WAPDxC,SAgBFyC,EAAapC,KAAA,SAASmB,WACtB,cAOEI,EAAIzB,GAAAA,QAAJ,kBAAA,SAAAoC,GArBIX,EAAY5B,SAwBlB4B,EAAAM,UAAoB9B,MAAAA,WAClBF,aAUFc,OAAeC,uCAAfZ,KAAA,SACAW,GAAAA,SAAeP,WAEfS,OAEAhB","file":"cart.min.js","sourcesContent":["jQuery(document).ready(function(){\r\n  // Für Warenkorbseite - vielleicht getrennt einhängen?\r\n\r\n  // Wiederholer Label entfernen.\r\n  jQuery(\"label[for='acf-field_616558167898c']\").remove();\r\n\r\nfunction appendSum(){\r\n  // Reihe für Summe dranhängen.\r\n  jQuery('tbody').append('<tr><td colspan=\"5\"></td>' +\r\n  '<td class=\"acf-field acf-field-number acf-field-617bb334332ea\" data-name=\"cart-total-price\" data-type=\"number\" data-key=\"field_617bb334332ea\">' +\r\n  '<div class=\"acf-label\">' +\r\n  '<label for=\"acf-field_617bb334332ea\">Gesamtpreis in €</label></div>' +\r\n  '<div class=\"acf-input\">' +\r\n  '<div class=\"acf-input-wrap\"><input type=\"number\" id=\"total-price-table\" name=\"acf[field_617bb334332ea]\" min=\"0\" max=\"5000\" readonly=\"readonly\"></div></div>' +\r\n  '</div></td><td colspan=\"3\"></td></tr>'\r\n);\r\n}\r\n\r\nvar rowToDeleteCheckbox = jQuery('.acf-field[data-name=\"cart_item-delete\"]');\r\n\r\nfunction changeAttributes(){\r\n// Die Reihe der Tabelle.\r\n\r\nconst dataName = ['cart_author','cart_titel', 'cart_publicationform', 'cart_order-number', 'cart_price'];\r\ndataName.forEach(disableFields);\r\nfunction disableFields(dataName){\r\n  var disabledFields = jQuery('.acf-field[data-name=\"'+ dataName + '\"]').find('input');\r\n  disabledFields.attr('readonly','readonly');\r\n  // remove attribute autocomplete from checkbox input.\r\n  rowToDeleteCheckbox.find('input').removeAttr('autocomplete');\r\n}\r\n}\r\n\r\nfunction changeRoleAttr(){\r\n// Barrierefreiheit für Tabellen.\r\nconst editableFields = ['cart_amount','cart_item-delete'];\r\neditableFields.forEach(roleStatus);\r\nfunction roleStatus(editableFields){\r\n  var roleStatusFields = jQuery('.acf-field[data-name=\"'+ editableFields + '\"]').find('input');\r\n  roleStatusFields.attr('role', 'status');\r\n};\r\n}\r\n// Spalte mit Post-ID verschwinden lassen.\r\nfunction hideColumn(hideColumn){\r\n    let inputFields = jQuery('.acf-field[data-name=\"item_post\"]').find('input');\r\n    inputFields.attr('type', 'hidden');\r\n    jQuery('.acf-th[data-name=\"item_post\"]').find('label').remove();\r\n  };\r\n  appendSum();\r\n  changeAttributes();\r\n  changeRoleAttr();\r\n  hideColumn();\r\n  makeTableResponsive();\r\n\r\n// Disable Fields in Checkout.\r\n// disableFields('cart_amount');\r\n// deleteFields = jQuery('.acf-field[data-name=\"cart_item-delete\"]');\r\n// console.log(deleteFields);\r\n// deleteFields.each( function(){\r\n//   $(this).remove();\r\n// });\r\n// acfDeleteUi = jQuery('.acf-js-tooltip');\r\n// acfDeleteUi.each( function(){\r\n//   $(this).remove();\r\n// });\r\n\r\n// Reihen Löschen. -- hier mit Promises arbeiten.\r\n// var checkboxDeleteRow = .find('input');\r\n\r\nrowToDeleteCheckbox.on(\"click\", \"input\" , function(){\r\n  currentCheckBox = $(this);\r\n      shureToDeleteModal = '<div class=\"add-to-cart-modal--webwerk\" id=\"cart-modal--webwerk\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"item-delete-modal-head\" aria-hidden=\"false\">' +\r\n      '<div class=\"cart-modal__settings\">' +\r\n      '<section>' +\r\n      '<h2 id=\"item-delete-modal-head\">Wollen Sie den Artikel wirklich aus dem Warenkorb löschen?</h2>' +\r\n      '</section>' +\r\n      '<div class=\"c-btns\">' +\r\n      '<button id=\"c-btn__delete\" class=\"btn btn-standard c-btn\">Ja</button>' +\r\n      '<button id =\"c-btn__cancel\" class=\"btn btn-standard c-btn\">Nein (Abbrechen)</button>' +\r\n      '</div>' +\r\n      '</div>' +\r\n      '</div>';\r\n\r\n  const rowToDelete = $(this).parentsUntil(\"tbody\").last();\r\n  console.log(rowToDelete);\r\n  rowToDelete.append(shureToDeleteModal).append();\r\n  rowToDeleteCheckbox.promise().done(function(){\r\n    trapFocusinModal();\r\n    // console.log(jQuery('#c-btn__delete'));\r\n    deleteButton = jQuery('#c-btn__delete');\r\n    deleteButton.focus();\r\n  });\r\n  // Funktion zum Entfernen des Modals.\r\n  function removeModal(){\r\n    modalOuter = jQuery('#cart-modal--webwerk');\r\n    modalOuter.remove();\r\n  }\r\n  // Cancel Item Delete\r\n  rowToDelete.on('click', '#c-btn__cancel', function(e){\r\n    removeModal();\r\n    rowToDelete.find('input').removeAttr('checked');\r\n\r\n  });\r\n\r\n  // Item Delete\r\n  rowToDelete.on('click', '#c-btn__delete', function(e){\r\n    \t// removeModal();\r\n      // console.log(rowToDelete);\r\n      rowToDelete.remove();\r\n      rowToDelete.promise().done(function() {\r\n      calculateTotal();\r\n    });\r\n  });\r\n});\r\n\r\n\r\n// Ende: Document ready.\r\n\r\n\r\n// Auf Mengenänderung schauen.\r\nvar itemCount = jQuery('.acf-field[data-name=\"cart_amount\"]').find('input');\r\nitemCount.on('input', function()\r\n{\r\n  calculateTotal();\r\n    // console.log('input changed to: ', itemCount.val());\r\n});\r\n\r\n// Summe berechnen\r\nfunction calculateTotal(){\r\n  var totalPrice = 0;\r\nconst priceCells = jQuery('.acf-field[data-name=\"cart_price\"]').find('input');\r\nconst amountCells = jQuery('.acf-field[data-name=\"cart_amount\"]').find('input');\r\nfor (let i = 0; i < priceCells.length; i++) {\r\n  if (priceCells[i].value) {\r\n    var singlePrice = priceCells[i].value.replace(/[^0-9.]/g, '');\r\n    var cartAmount = parseInt(amountCells[i].value);\r\n    var multiplePrice = parseFloat(singlePrice) * cartAmount;\r\n       totalPrice = totalPrice + multiplePrice;\r\n       // console.log( typeof(priceCells[i].value) + ' ' + priceCells[i].value );\r\n  }\r\n}\r\ntotalPriceTable = document.getElementById(\"total-price-table\");\r\ntotalPriceCell = document.getElementById(\"acf-field_617bb334332ea\");\r\ntotalPriceCell.innerHTML = totalPrice;\r\ntotalPriceCell.value = totalPrice;\r\ntotalPriceTable.innerHTML = totalPrice;\r\ntotalPriceTable.value = totalPrice;\r\n}\r\ncalculateTotal();\r\n\r\n\r\n\r\n\r\n});\r\n// End: Document ready.\r\n\r\nfunction makeTableResponsive(){\r\n  // Tabelle Mobil (responsive)\r\n  // var n;\r\n  // $('tbody tr').children().each(function(n) {\r\n  //   n = 0;\r\n  //   var tableTextCon = $(this).text();\r\n  //   //\t\tconsole.log(tableTextCon);\r\n  //   $('tbody td:nth-of-type(' + (n + 1) + ')').html('<p class=\"res-tbody\">' + tableTextCon + '</p>');\r\n  // });\r\n  let index2 = 1;\r\n  $('tr:first-of-type').children().each(function(index2) {\r\n    var tableText = $(this).text();\r\n    $('tbody td:nth-of-type(' + (index2 + 1) + ')').prepend('<p class=\"res-thead\">' + tableText + '</p>');\r\n  });\r\n}\r\n"]}