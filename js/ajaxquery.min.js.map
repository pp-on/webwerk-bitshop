{"version":3,"sources":["ajaxquery.js"],"names":["jQuery","ready","cartItem","click","ajax","this","data","type","xhr","wp_ajax_cart_obj","restURL","beforeSend","setRequestHeader","restNonce","action","contentType","success","JSON","dataType","$","cartItemID","parent","append","text","console","errorThrown","parseFloat","toFixed","error","log","event","url","trapFocusinModal","focus"],"mappings":"AAIIA,OAAAA,UAAOC,OACLC,SAAAA,GADFF,OAAO,4BAA4BG,OAAM,WAKvCC,SAAKJ,OAAAK,MAAAC,OACHC,WADGL,SAAA,OAIDM,EAAAA,KAAG,CAJFD,KAAA,OAMHD,IAAMG,iBAAAC,QAAA,gCACFC,WAAU,SAAAH,GACVA,EAAAI,iBAAe,aAFbH,iBAAAI,YAIFP,KAAA,CAHAQ,OAAU,cAPXC,YAAA,mBAaHC,KAAQC,KAASX,UAAMJ,UACrBgB,SAAA,QAGEC,QAAE,SAAAb,GAGEA,EAAAA,iCAAoBc,WAAA,MAAAC,SAAAC,OAAAhB,EAAA,QACtBN,EAAAA,mBAAuBuB,QACvBvB,mBAtBHM,EAAA,aAyBIN,OAAA,gBAAqBuB,KAAAjB,EAAA,WAAA,iBACxBkB,OAAYC,gBAAZF,KAAAG,WAAApB,EAAA,WAAA,kBAAAqB,QAAA,GAAA,QA/BRC,MAAA,SAAAH,GAoCKD,QAAAK,IAAAJ,SAMHd,OAAAA,mBAAsBH,OAAK,SAAAsB,GAG3BxB,EAAAA,KAAAA,CACIC,KAAA,OACAwB,IAAAtB,iBAAeC,QAAA,2BACfC,WAAA,SAAAH,GACAA,EAAAI,iBACA,aAAAH,iBAAAI,YALEP,KANH,CAaHU,OAAQ,cACND,YAAA,mBAEEG,SAAA,QAGAc,QAAAA,SAAAA,GAJF1B,EAOO,gBAAA,GAGLa,EAAE,mBAAkBc,SAApBX,OAAAhB,EAAA,aAGA0B,mBACAb,EAAA,uBAAAc,UAEJL,EAAK,mBAAWH,SAAYH,OAAAhB,EAAA,cACxBkB,mBACHL,EAAA,kBAAAc,UAFDL,MAAO,SAASH,GACZD,QAAQK,IAAIJ","file":"ajaxquery.min.js","sourcesContent":["\r\njQuery(document).ready(\r\n  function($) {\r\n\r\n    jQuery('button.btn-cart.add-item').click(function(){\r\n      cartItem = jQuery(this).data();\r\n      cartItemID = (cartItem ['itemId']);\r\n\r\n    // This does the ajax request\r\n    $.ajax({\r\n        type: 'POST',\r\n        url: wp_ajax_cart_obj.restURL + 'bit-shop/v1/items/cart-action',\r\n        beforeSend: function (xhr) {\r\n          xhr.setRequestHeader( 'X-WP-Nonce', wp_ajax_cart_obj.restNonce);\r\n        },\r\n        data: {\r\n            'action': 'cart_action',\r\n            'contentType': 'application/json',\r\n            'item' : JSON.stringify(cartItem),\r\n            'dataType': 'json',\r\n            // 'nonce' : wp_ajax_cart_obj.nonce\r\n        },\r\n        success:function(data) {\r\n          // console.log(data);\r\n            // This outputs the result of the ajax request\r\n            $(\"button.add-item[data-item-id='\" + cartItemID + \"']\").parent().append(data['markup']);\r\n            $(\".c-btn__shop-on\").focus();\r\n            trapFocusinModal();\r\n            // Hier wird der Zähler im Warenkorbknopf aktualisiert.\r\n            if (data['cart_items']) {\r\n              jQuery('#items-count').text(data['cart_items']['cart_item_count']);\r\n              jQuery('#total-price').text(parseFloat(data['cart_items']['cart_items_price']).toFixed(2) + ' €');\r\n            }\r\n        },\r\n        error: function(errorThrown){\r\n            console.log(errorThrown);\r\n        }\r\n    });\r\n  });\r\n\r\n  jQuery('#signout-button').click(function(event){\r\n\r\n  // This does the ajax request\r\n  $.ajax({\r\n      type: 'POST',\r\n      url: wp_ajax_cart_obj.restURL + 'bit-shop/v1/logout/modal',\r\n      beforeSend: function (xhr) {\r\n        xhr.setRequestHeader( 'X-WP-Nonce', wp_ajax_cart_obj.restNonce);\r\n      },\r\n      data: {\r\n          'action': 'cart_logout',\r\n          'contentType': 'application/json',\r\n          // 'item' : JSON.stringify(cartItem),\r\n          'dataType': 'json',\r\n          // 'nonce' : wp_ajax_cart_obj.nonce\r\n      },\r\n      success:function(data) {\r\n        // console.log(data);\r\n        if (data['cart_item_count'] > 0) {\r\n          // event.preventDefault();\r\n          // This outputs the result of the ajax request\r\n          $(\"#signout-button\").parent().append(data['markup_full']);\r\n          trapFocusinModal();\r\n          $(\".c-btn__delete-cart\").focus();\r\n\r\n        } else {\r\n          $(\"#signout-button\").parent().append(data['markup_empty']);\r\n          trapFocusinModal();\r\n          $(\".c-btn__logout\").focus();\r\n        }\r\n\r\n          // Hier wird der Zähler im Warenkorbknopf aktualisiert.\r\n          // jQuery('#items-count').text(data['cart_item_count']);\r\n      },\r\n      error: function(errorThrown){\r\n          console.log(errorThrown);\r\n      }\r\n  });\r\n});\r\n});\r\n"]}